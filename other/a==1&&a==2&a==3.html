<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 学习地址 https://www.jianshu.com/p/7b82a4c47f28

        // valueOf和toString
        // 这个问题的一个关键点就是在于利用 == 双等号工作原理，== 和 === 有什么区别呢？
        // 最主要的就是用 == 的时候会涉及到类型转换，如果双等号两边数据类型不同会尝试将他们转化为同一类型。
        // 基础数据类型之间的转换是比较简单的，这里来说一下对象类型在使用 == 时产生的隐形转换。


        // 方法1：
        let a = {
            i: 1,
            valueOf() {
                return a.i++
            }
        }

        console.log(a == 1 && a == 2 && a == 3);

        // 方法二
        // var val = 0;
        // Object.defineProperty(window, 'a', {
        //     get: function () {
        //         return ++val;
        //     }
        // });
        // console.log(a === 1 && a === 2 && a === 3);



        // js中的valueOf和toString
        // 值运算和显示问题，一般在隐式类型转换时会自动调用



        // var aaa = {
        //     i: 10,
        //     valueOf: function () {
        //         console.log('valueOf')
        //         return this.i + 30;
        //     },
        //     toString: function () {
        //         console.log('toString')
        //         return this.i + 10;
        //     }
        // }
        // console.log(aaa > 20); // valueOf  true
        // console.log('' + aaa);  //  valueOf  40
        // console.log(++aaa); // valueOf  41
        // console.log(+aaa); //  valueOf  40
        // alert(aaa); // toString 20
        // console.log(aaa == 40) //valueOf true
        // console.log(String(aaa)) // toString 20

        // 总结：涉及到操作符的问题，valueOf的优先级比toString的优先级高，涉及到显示问题，toString方法优先级比valueOf方法高。
    </script>
</body>

</html>